## Bug Fixes

### Fixed Nested LATERAL Join Bug for Correlated Subqueries

Fixed a bug where nested collections using correlated subqueries (`toNumberList()`, `toStringList()`, `count()`, etc.) inside a parent LATERAL join would generate invalid SQL.

**Before (broken):**
```typescript
db.productPriceTimeSlots.select(slot => ({
  items: slot.productPrices.select(price => ({
    capacityGroupIds: price.productPriceCapacityGroups.select(cg => ({
      id: cg.capacityGroupId,
    })).toNumberList('capacityGroupIds'),
  })).toList('items'),
}))
```

This would generate SQL that incorrectly referenced `"orders"."id"` instead of the aliased table name `"lateral_0_orders"."id"` inside the LATERAL subquery, causing the error:
```
PostgresError: relation "lateral_1" does not exist
```
or
```
PostgresError: invalid reference to FROM-clause entry for table "orders"
```

**After (fixed):** The query now correctly uses the parent collection's aliased table name in nested correlated subqueries.

### Fixed Scalar Aggregations Inside Nested Collections

Fixed a bug where scalar aggregations (`count()`, `min()`, `max()`, `sum()`) inside nested collections would return `{}` instead of the actual value.

**Before (broken):**
```typescript
db.users.select(u => ({
  orders: u.orders!.select(o => ({
    orderId: o.id,
    taskCount: o.orderTasks!.count(),  // Returned {} instead of number
  })).toList('orders'),
}))
```

**After (fixed):** Scalar aggregations now correctly return their numeric values.

---

### Technical Details

#### Nested LATERAL Join Fix
- Modified `buildCorrelatedSubqueryAggregation()` in `lateral-collection-strategy.ts` to look up the parent collection's aliased table name from `context.lateralTableAliasMap` when building the WHERE clause correlation
- Modified `processField()` in `query-builder.ts` to only create `nestedCteJoin` when there's actually a join clause needed (CTE or LATERAL with join clause), not for correlated subqueries

#### Scalar Aggregation Fix
- Modified `processField()` in `query-builder.ts` to detect scalar aggregations (`COUNT`, `MIN`, `MAX`, `SUM`) and skip attaching `nestedCollectionInfo` for them, since the result is a scalar value that doesn't need transformation

### Files Changed

- `src/query/query-builder.ts` - Fixed nested collection processing for both issues
- `src/query/strategies/lateral-collection-strategy.ts` - Added lateral table alias lookup for nested collections
- `tests/queries/lateral-strategy.test.ts` - Added tests for nested collections with `toNumberList()` and `count()`
